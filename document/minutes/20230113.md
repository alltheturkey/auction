ユーザ作成処理について

- 案1
  - `/rooms` ではログイン処理はなし
  - `/rooms/{roomId}` ではポップアップを出す
- 案2
  - `/rooms` でログインするようにする
  - `/rooms/{roomId}` にログインボタンがあって、

よくわからなくなってきたので、一旦「観戦あり or なし」を決めたい。つまり、`/rooms/{roomId}` に入ったらログイン必須かそうでないか

- 観戦は `ws /rooms/{roomId}` が受け取れたらいい

認証は現状考えていない

決めること

- 観戦どうする？
  - 観戦は無しでOK
- ユーザ名入力のポップアップはどこで出す？
  - 案1で、ユーザ名入力のポップアップは `/room/{roomId}`gで入力するようにする

roomを作成したらそのルームにリダイレクト

1ユーザは1ルームにしか入れない

ユーザAliceが、ルームAとルームBに入れるようにするか？
それとも、ユーザAliceはルームAにしか入れなくて、ルームBに入りたいなら別のユーザBobを作る必要があるとするか？

`user.roomId` は現在のルームIDを指していて、入るルームによって変わりうる

クライアントからwebsocket sendをすることはない。クライアント受け取り専用
サーバへの送信処理はAPI endpointで行う

websocketは相手のプレイヤーの金額手札も含めて全部の情報を送る

3人以上揃ったら「ゲームスタート」ボタンを押してスタート
順番はランダムに決める

入札はフロントエンドでvalidationするので、PUT `/auction/{auctin_id}` が飛ぶならそれは最高落札者としてサーバでは扱う

### TODO

- [ ] ER図修正
  - [ ] ユーザ作成処理はゲーム画面のみ
  - [ ] ルームに参加のレスポンスにWSのブロードキャスト
    - [ ] WSの接続はゲーム画面を開いたら即時
  - [ ] 次のターンの処理は、要検討
  - [ ] 取引で同額の場合の処理 -> 取引を持ちかけた人がカードを取得
  - [ ] 競売でのロバの処理
  - [ ] DELETE /room は勝者表示の後
- [ ] DB設計/prisma修正
  - [ ] users.room_idはnon null
